import React, { useState } from "react"; import { motion, AnimatePresence } from "framer-motion"; import { ThumbsUp, ThumbsDown, X, Send } from "lucide-react";

/**

MomentumCardsWithFeedback

Drop-in component for cards that support thumbs-up/down and a quick feedback note.

One tap registers the vote and opens a little note field.


Submit calls onFeedback with { cardId, vote, note } so you can persist it.


Tailwind-only styling; no external CSS required.


Replace cards with real data, or pass as prop. */



const defaultCards = [ { id: "anet", title: "ANET", score: 79, subtitle: "Strong", blurb: "Trigger 133.75 stop-limit | R:R 1.5 | ATR $34.57", }, { id: "snow", title: "SNOW", score: 76, subtitle: "Strong", blurb: "Trigger 241.35 stop-limit | R:R 1.5 | ATR $9.43", }, { id: "meta", title: "META", score: 74, subtitle: "Strong", blurb: "Trigger 719.50 stop-limit | R:R 1.5 | ATR 18.53", }, ];

/**

Props

cards?: { id: string; title: string; score?: number; subtitle?: string; blurb?: string }[]


onFeedback?: (payload: { cardId: string; vote: "up" | "down"; note: string }) => void */ export default function MomentumCardsWithFeedback({ cards = defaultCards, onFeedback }) { return (


 <div className="min-h-screen w-full bg-neutral-950 text-neutral-100 p-6">
   <h1 className="text-3xl md:text-4xl font-bold mb-6">Swing Warm: Top Momentum Setups</h1>
   <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
     {cards.map((c) => (
       <CardWithFeedback key={c.id} card={c} onFeedback={onFeedback} />)
     )}
   </div>
 </div>
); }

function CardWithFeedback({ card, onFeedback }) { const [vote, setVote] = useState(null); // "up" | "down" | null const [open, setOpen] = useState(false); const [note, setNote] = useState(""); const [sending, setSending] = useState(false); const [sent, setSent] = useState(false);

const handleVote = (v) => { setVote(v); setOpen(true); // open the little note area on tap };

const handleSubmit = async () => { setSending(true); try { const payload = { cardId: card.id, vote: vote || "up", note: note.trim() }; // If an onFeedback prop is provided, call it. Otherwise log to console. if (onFeedback) { await onFeedback(payload); } else { // Example POST â€” plug your endpoint here // await fetch("/api/feedback", { method: "POST", headers: {"Content-Type":"application/json"}, body: JSON.stringify(payload)}); console.log("feedback", payload); } setSent(true); setNote(""); setTimeout(() => { setOpen(false); setSent(false); setVote(null); }, 900); } finally { setSending(false); } };

return ( <div className="relative rounded-2xl bg-neutral-900/70 border border-neutral-800 shadow-xl overflow-hidden"> {/* Header /} <div className="p-5 flex items-start justify-between gap-3"> <div> <div className="text-neutral-300 text-sm uppercase tracking-widest">Setup</div> <div className="flex items-center gap-3"> <h2 className="text-2xl font-bold">{card.title}</h2> {typeof card.score === "number" && ( <span className="text-sm px-2 py-1 rounded-full bg-emerald-500/15 text-emerald-300 border border-emerald-600/30"> {card.score} </span> )} </div> {card.subtitle && <div className="text-emerald-300 text-sm mt-1">{card.subtitle}</div>} </div> {/ Quick thumbs */} <div className="flex items-center gap-2"> <ThumbButton active={vote === "up"} ariaLabel="Thumbs up" onClick={() => handleVote("up")} icon={<ThumbsUp className="w-4 h-4" />} /> <ThumbButton active={vote === "down"} ariaLabel="Thumbs down" onClick={() => handleVote("down")} icon={<ThumbsDown className="w-4 h-4" />} /> </div> </div>

{/* Body placeholder */}
  <div className="px-5 pb-5">
    <div className="text-neutral-400 text-sm leading-relaxed">
      {card.blurb || "Signal details, trigger, R:R, ATR, and notes go here."}
    </div>
  </div>

  {/* Feedback sheetlet */}
  <AnimatePresence>
    {open && (
      <motion.div
        initial={{ height: 0, opacity: 0 }}
        animate={{ height: "auto", opacity: 1 }}
        exit={{ height: 0, opacity: 0 }}
        transition={{ type: "spring", stiffness: 220, damping: 26 }}
        className="border-t border-neutral-800 bg-neutral-900/95"
      >
        <div className="p-4 flex items-start gap-3">
          <div className={`shrink-0 mt-1 rounded-lg px-2 py-1 text-xs border ${
            (vote === "up" ? "bg-emerald-500/15 text-emerald-300 border-emerald-500/30" :
             vote === "down" ? "bg-rose-500/15 text-rose-300 border-rose-500/30" :
             "bg-neutral-800 text-neutral-300 border-neutral-700")
          }`}> {vote ? (vote === "up" ? "Liked" : "Not helpful") : "Feedback"} </div>

          <div className="w-full">
            <textarea
              className="w-full resize-none rounded-xl bg-neutral-950 border border-neutral-800 focus:border-neutral-600 focus:outline-none p-3 text-sm placeholder:text-neutral-500"
              rows={3}
              value={note}
              onChange={(e) => setNote(e.target.value)}
              placeholder={vote === "down" ? "What didnâ€™t work for you? e.g., bad level, late signal, unclear risk" : "What did you like? e.g., clean trigger, risk clarity, great timing"}
            />
            <div className="mt-3 flex items-center justify-between">
              <button
                type="button"
                onClick={() => { setOpen(false); setVote(null); setNote(""); }}
                className="inline-flex items-center gap-1 text-xs text-neutral-400 hover:text-neutral-200"
              >
                <X className="w-3.5 h-3.5" /> Close
              </button>

              <div className="flex items-center gap-2">
                <button
                  type="button"
                  onClick={handleSubmit}
                  disabled={sending}
                  className="inline-flex items-center gap-1 rounded-xl px-3 py-2 text-sm font-medium bg-neutral-100 text-neutral-900 hover:bg-white disabled:opacity-60"
                >
                  <Send className="w-4 h-4" /> {sending ? "Sendingâ€¦" : "Submit"}
                </button>
              </div>
            </div>
          </div>
        </div>

        <AnimatePresence>
          {sent && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              className="px-4 pb-4 text-xs text-neutral-400"
            >
              Thanks â€” logged! ðŸ™Œ
            </motion.div>
          )}
        </AnimatePresence>
      </motion.div>
    )}
  </AnimatePresence>
</div>

); }

function ThumbButton({ active, onClick, icon, ariaLabel }) { return ( <button aria-label={ariaLabel} onClick={onClick} className={rounded-xl border px-2.5 py-2 transition-colors shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-neutral-700 ${ active ? "bg-neutral-100 text-neutral-900 border-neutral-200" : "bg-neutral-900/60 text-neutral-200 border-neutral-800 hover:bg-neutral-800" }} > <div className="flex items-center gap-1.5">{icon}<span className="text-xs font-medium hidden sm:inline">{ariaLabel}</span></div> </button> ); }

